import{r as a,j as e,a as S,f as N,b as P}from"./app-AIDFTJRs.js";import{A as T}from"./AuthenticatedLayout-DBkp5rbV.js";import{f as l}from"./formatRupiah--QECpPMs.js";import"./ApplicationLogo-CSuGBocz.js";import"./transition-B4OsJkZg.js";function Y({cartItems:c,totalPrice:o}){const[f,r]=a.useState(!1),[i,n]=a.useState(null),[d,y]=a.useState(""),[m,g]=a.useState(""),[x,v]=a.useState(""),C=async()=>{try{const t=await P.post(route("checkout"),{address:d,house_marker:m,phone_number:x}),{snapToken:s}=t.data;window.snap.pay(s,{onSuccess:function(j){alert("Payment successful!"),window.location.reload()},onPending:function(j){alert("Payment pending!")},onError:function(j){alert("Payment failed!")}})}catch(t){console.error("Checkout failed:",t),alert("Something went wrong. Please try again.")}},h=(t,s)=>{s<1?(n(t),r(!0)):u(t,s)},u=(t,s)=>{N.put(route("cart.update",{cart:t}),{quantity:s})},w=()=>{i&&(u(i,0),r(!1),n(null))},b=()=>{r(!1),n(null)},p=Math.round(o*.11),k=o+p;return e.jsxs(T,{header:e.jsx("h2",{className:"text-xl font-semibold leading-tight",children:"Your Cart"}),children:[e.jsx(S,{title:"Cart"}),e.jsx("div",{className:"py-12",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.length>0?e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body",children:[e.jsx("h2",{className:"card-title text-2xl mb-6 text-primary",children:"Shopping Cart"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"table table-zebra w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-base-200",children:[e.jsx("th",{className:"text-base text-primary-focus",children:"Product"}),e.jsx("th",{className:"text-base text-primary-focus",children:"Price"}),e.jsx("th",{className:"text-base text-primary-focus",children:"Quantity"}),e.jsx("th",{className:"text-base text-primary-focus text-right",children:"Total"})]})}),e.jsx("tbody",{children:c.map(t=>e.jsxs("tr",{className:"hover",children:[e.jsx("td",{className:"font-medium",children:t.product.title}),e.jsx("td",{children:e.jsx("span",{className:"badge badge-ghost badge-lg",children:l(t.product.price)})}),e.jsx("td",{children:e.jsxs("div",{className:"join",children:[e.jsx("button",{className:"btn btn-sm btn-primary join-item",onClick:()=>h(t.id,t.quantity-1),children:"-"}),e.jsx("span",{className:"btn btn-sm join-item btn-disabled bg-base-100 text-base-content",children:t.quantity}),e.jsx("button",{className:"btn btn-sm btn-primary join-item",onClick:()=>h(t.id,t.quantity+1),children:"+"})]})}),e.jsx("td",{className:"text-right font-bold text-primary",children:l(t.product.price*t.quantity)})]},t.id))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-base-200",children:[e.jsx("th",{colSpan:"3",className:"text-base text-right text-primary-focus",children:"Total Amount (incl. Tax)"}),e.jsx("th",{className:"text-right text-lg text-primary font-bold",children:l(k)})]})}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-base-200",children:[e.jsx("th",{colSpan:"3",className:"text-base text-right text-primary-focus",children:"Tax (11%)"}),e.jsx("th",{className:"text-right text-lg text-primary font-bold",children:l(p)})]})})]})}),e.jsx("div",{className:"card-actions justify-center my-6",children:e.jsxs("div",{className:"w-full max-w-lg",children:[e.jsxs("div",{className:"form-control mb-4",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Address"})}),e.jsx("input",{type:"text",placeholder:"Enter your address",className:"input input-bordered w-full",value:d,onChange:t=>y(t.target.value)})]}),e.jsxs("div",{className:"form-control mb-4",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"House Marker (e.g., 'Blue Gate')"})}),e.jsx("input",{type:"text",placeholder:"Enter house marker",className:"input input-bordered w-full",value:m,onChange:t=>g(t.target.value)})]}),e.jsxs("div",{className:"form-control mb-4",children:[e.jsx("label",{className:"label",children:e.jsx("span",{className:"label-text",children:"Phone Number"})}),e.jsx("input",{type:"number",placeholder:"Enter your phone number",className:"input input-bordered w-full",value:x,onChange:t=>v(t.target.value)})]}),e.jsx("button",{className:"btn btn-primary btn-lg w-full",onClick:C,children:"Checkout"})]})})]})}):e.jsx("div",{className:"card bg-base-100 shadow-xl",children:e.jsxs("div",{className:"card-body items-center text-center",children:[e.jsx("h2",{className:"card-title text-2xl text-primary mb-4",children:"Your Cart"}),e.jsx("div",{className:"text-lg text-secondary mb-6",children:"Your cart is empty."}),e.jsx("div",{className:"card-actions",children:e.jsx("button",{className:"btn btn-primary btn-lg",onClick:()=>N.visit(route("products.index")),children:"Continue Shopping"})})]})})})}),e.jsxs("dialog",{className:`modal ${f?"modal-open":""}`,children:[e.jsxs("div",{className:"modal-box",children:[e.jsx("h3",{className:"font-bold text-lg text-error",children:"Remove Item"}),e.jsx("p",{className:"py-4",children:"Are you sure you want to remove this item from your cart?"}),e.jsxs("div",{className:"modal-action",children:[e.jsx("button",{className:"btn btn-error",onClick:w,children:"Yes, remove it"}),e.jsx("button",{className:"btn btn-outline",onClick:b,children:"Cancel"})]})]}),e.jsx("form",{method:"dialog",className:"modal-backdrop",onClick:b,children:e.jsx("button",{children:"close"})})]})]})}export{Y as default};
